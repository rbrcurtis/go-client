(function(){if(!window._inmobi){window._inmobi={configs:[],iframes:[],windows:[],parents:[],listeners:{},mraidStatus:"",iframeIdPrefix:"inmobi-iframe-",configParamsAccepted:{siteid:"mk-siteid",slot:"mk-ad-slot",age:"u-age",gender:"u-gender",location:"u-location",interests:"u-interests",postalCode:"u-postalCode",areaCode:"u-areaCode",dateOfBirth:"u-dateOfBirth",income:"u-income",latlong:"u-latlong",education:"u-education",ethnicity:"u-ethnicity",adtype:"adtype",targetWindow:"targetWindow"},slotSizes:{"1":{width:120,height:20},"2":{width:168,height:28},"3":{width:216,height:36},"4":{width:300,height:50},"9":{width:320,height:48},"10":{width:300,height:250},"11":{width:728,height:90},"12":{width:468,height:60},"13":{width:120,height:600},"14":{width:320,height:480},"15":{width:320,height:50},"16":{width:1024,height:768},"17":{width:1280,height:800}},configParamsRequired:["slot","siteid"],events:["close"],adServerURL:"http://i.w.inmobi.com/showad.asm",adServerTestURL:"http://t.sandbox.inmobi.com/showad.asm",versionString:"pr-JSAC-BTFTB-20120405",testSiteId:"4028cba631d63df10131e1d3191d00cb",indexOf:function(g,d){try{for(var c in g){if(g[c]===d){return c}}}catch(f){}return -1},randomString:function(){var e="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d;for(d=0;d<6;d++){e+=c.charAt(Math.floor(Math.random()*c.length))}return e},generateIframeId:function(){return this.iframeIdPrefix+this.randomString()},getSlotSize:function(c){return this.slotSizes[""+c.slot]},validateConfig:function(d){var e,c;if(d===null){throw"Expected config object, got null, make sure inmobi_conf variable is set for each ad slot."}if(typeof d!=="object"){throw"Expected config object, got "+(typeof d)+" make sure inmobi_conf variable is set for each ad slot."}for(e=0;e<this.configParamsRequired.length;e++){c=this.configParamsRequired[e];if(!d.hasOwnProperty(c)||d[c]===null||d[c].length===0){throw"inmobi.js: ERROR: missing required config parameter '"+c+"'"}}if(!this.slotSizes[""+d.slot]){throw"inmobi.js: ERROR: inmobi_vars config slot param, '"+d.slot+"', is not a valid slot number."}},confToString:function(d){var e=[],c;for(c in d){if(this.configParamsAccepted.hasOwnProperty(c)){e.push(encodeURIComponent(this.configParamsAccepted[c])+"="+encodeURIComponent(d[c]))}}e.push("mk-ads=1");e.push("mk-version="+encodeURIComponent(this.versionString));e.push("format=html");e.push("__t="+(new Date()).getTime()+"-"+this.randomString());return e.join("&")},getURL:function(c){var d=c.test?this.adServerTestURL:this.adServerURL;return d+(d.indexOf("?")===-1?"?":"&")+this.confToString(c)},getNewAd:function(h,e){if(h===null||typeof h=="undefined"||!h.appendChild){throw"inmobi.js: ERROR: First param of getNewAd must be an element"}var d=this.indexOf(this.parents,h),g,c,j=null;if(d!=-1){g=this.iframes[d];if(typeof e=="undefined"){e=this.configs[d]}}if(typeof e=="undefined"&&typeof inmobi_conf=="object"){e=inmobi_conf}if(typeof h.getElementsByClassName!="undefined"){h.getElementsByClassName("inmobi-rm")[0]}else{for(var f=0;f<h.childNodes.length;f++){if(h.childNodes[f].getAttribute("class")==="inmobi-rm"){j=h.childNodes[f];break}}}if(j){j.parentNode.removeChild(j)}this.validateConfig(e);if(!g){c=this.getSlotSize(e);g=document.createElement("iframe");g.style.width=c.width+"px";g.style.height=c.height+"px";g.style.border="none";g.style.overflow="hidden";g.id=this.generateIframeId();g.setAttribute("class","inmobi-ad");g.setAttribute("scrolling","no")}g.src=this.getURL(e)+"&iframe="+g.id;g.style.display="block";if(!g.parentNode){if(d==-1){d=this.parents.length}h.appendChild(g);this.iframes[d]=g;this.windows[d]=g.contentWindow;this.parents[d]=h}window._inmobi["config_"+g.id]=e;return{iframe:g,config:e}},showAdInParent:function(m,n){var h=this.indexOf(this.windows,n),e=this.iframes[h],k=e.id.replace(/iframe/,"div"),c=document.getElementById(k),j,d,l,f;if(!c){c=document.getElementById(e.id).parentNode.insertBefore(document.createElement("div"),e);c.id=k;c.className="inmobi-rm"}c.innerHTML=m.html;if(window.ActiveXObject){var g=new ActiveXObject("Microsoft.XMLDOM");g.loadXML("<root>"+m.html+"</root>");d=g.getElementsByTagName("script")}else{d=c.getElementsByTagName("script")}for(f=0;f<d.length;f++){j=d[f];if(j.getAttribute("src")!=null){l=c.ownerDocument.createElement("script");l.src=j.getAttribute("src");if(!window.ActiveXObject){if(j.parentNode){j.parentNode.replaceChild(l,j)}}else{c.appendChild(l)}}else{this.globalEval(j.childNodes[0].nodeValue)}}c.style.width=m.width+"px";c.style.height=m.height+"px";e.style.display="none"},writeIframe:function(e){this.validateConfig(e);var d=this.getSlotSize(e),g=this.generateIframeId(),f,c,h="";if("object"==typeof e.params){for(p in e.params){h+="&"+p+"="+e.params[p]}}h?"&"+h:"";document.write('<iframe width="'+d.width+'" height="'+d.height+'" src="'+this.getURL(e)+"&iframe="+g+h+'" scrolling="no" class="inmobi-ad" id="'+g+'" style="border:none;overflow:hidden"></iframe>');window._inmobi["config_"+g]=e;f=document.getElementById(g);if(typeof e.onLoad=="function"){f.addEventListener("load",function(i){e.onLoad(i)},false)}this.iframes.push(f);this.windows.push(f.contentWindow);this.parents.push(f.parentNode);if(e.sticky&&("undefined"==typeof e.adtype)){this.makeItSticky(e,g)}if(e.autoRefresh){c=isNaN(e.autoRefresh.toString())?c:((e.autoRefresh*1)<c?c:e.autoRefresh);c=c*1000;window._inmobi["config_"+g]=e;window.setInterval(function(l){var j=window._inmobi;if(j.mraidStatus!="expand"){var i=g.replace(/iframe/,"div"),m=document,k=m.getElementById(i);if(k){k.parentNode.removeChild(k)}j.getNewAd(m.getElementById(g).parentNode,j["config_"+g])}},c)}},hasClass:function(g,f){var e=g.className.split(" "),i,d=f.length,h=e.length;for(i=0;i<h;i++){if(e[i].indexOf(f)>-1&&d==e[i].length){return true}}return false},isStickyAvailable:function(){var c=this.getBrowserInfo();if(c[0]>=5&&c[1]=="ios"){return true}return false},getBrowserInfo:function(){try{var d=navigator.userAgent,c=/(\d+(?:\_\d+){1,2})/,f=/(\d+(?:\.\d+){1,2})/;if(d.indexOf("Android")!=-1){return[f.exec(d.split("(")[1])[0].substr(0,1)*1,"android"]}else{if(d.indexOf("iPad")!=-1||d.indexOf("iPhone")!=-1){return[c.exec(d)[0].substr(0,1)*1,"ios"]}}return false}catch(g){return false}},makeItSticky:function(f,h){if(!this.isStickyAvailable()){return false}var j=document,g,i,c,e=this.getSlotSize(f);if(!this.hasClass(j.getElementById(h).parentNode,"inmobi-ad")){return false}c=j.getElementById(h);i=c.getAttribute("style")||"";if(f.sticky=="top"){g="position:fixed;top:0px;";c.setAttribute("style",g+i);j.getElementsByTagName("body")[0].style.marginTop=e.height+"px"}else{if(f.sticky=="right"&&e.height==600&&e.width==120){g="position:fixed;right:0px;";c.setAttribute("style",g+i);j.getElementsByTagName("body")[0].style.marginRight=e.width+"px"}else{if(f.sticky=="bottom"){g="position:fixed;bottom:0px;";c.setAttribute("style",g+i);j.getElementsByTagName("body")[0].style.marginBottom=e.height+"px"}else{if(f.sticky=="left"&&e.height==600&&e.width==120){g="position:fixed;left:0px;";c.setAttribute("style",g+i);j.getElementsByTagName("body")[0].style.marginLeft=e.width+"px"}}}}},rememberParentElement:function(c){var e="tmp-div-"+this.randomString(),d;document.write('<div id="'+e+'"></div>');d=document.getElementById(e);if(d.parentNode){this.parents.push(document.getElementById(e).parentNode);this.iframes.push(null);this.windows.push(null);d.parentNode.removeChild(d)}},parseJSON:function(c){if(JSON){return JSON.parse(c)}else{return this.globalEval("("+c+")")}},addEventListener:function(c,d){if(this.indexOf(this.events,c)==-1){throw"inmobi.js: ERROR: Unknown event type '"+c+"'"}if(!this.listeners[c]){this.listeners[c]=[]}this.listeners[c].push(d)},dispatchEvent:function(e,c){var d;if(this.indexOf(this.events,e)==-1){throw"inmobi.js: ERROR: Unknown event type '"+e+"'"}if(!this.listeners[e]){return}for(d=0;d<this.listeners[e].length;d++){(this.listeners[e][d])(c)}},handleClose:function(d){var f=document.getElementsByTagName("iframe"),c,e;for(e=0;e<f.length;e++){if(f[e].contentWindow===d){c=f[e]}}while(c.parentNode&&c.parentNode!==c){c=c.parentNode;if(this.indexOf(this.parents,c)!=-1){break}}this.dispatchEvent("close",{container:c})}};var a=function(g){if(g.origin=="http://w.inmobi.com"||g.origin=="http://i.w.inmobi.com"||g.origin=="http://w.sandbox.inmobi.com"||g.origin=="http://i.w.sandbox.inmobi.com"||g.origin=="http://t.sandbox.inmobi.com"||g.origin=="http://d3rpthdy8caxbt.cloudfront.net"||g.origin=="http://edgy.inmobi.com"||g.origin=="http://edgy.sproutbuilder.com"){var i=window._inmobi.parseJSON(g.data);if(i.action!=undefined){window._inmobi.mraidStatus=i.action}switch(i.topic){case"showAdInParent":window._inmobi.showAdInParent(i.ad,g.source);break;case"nfr":var f=window._inmobi["config_"+i.container],c,h=document,e=_inmobi.getSlotSize(f);if(typeof f.onError=="function"){f.onError("nfr");if(f.sticky=="top"){h.getElementsByTagName("body")[0].style.marginTop="0px"}else{if(f.sticky=="right"&&e.height==600&&e.width==120){h.getElementsByTagName("body")[0].style.marginRight="0px"}else{if(f.sticky=="bottom"){h.getElementsByTagName("body")[0].style.marginBottom="0px"}else{if(f.sticky=="left"&&e.height==600&&e.width==120){h.getElementsByTagName("body")[0].style.marginLeft="0px"}}}}}break}switch(i.action){case"collapse":window._inmobi.handleClose(g.source);break;case"close":window._inmobi.handleClose(g.source);break}}};if(typeof window.addEventListener!="undefined"){window.addEventListener("message",a,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onmessage",a,false)}}}var b=window._inmobi;if(typeof inmobi_conf=="undefined"){inmobi_conf={manual:true}}b.configs.push(inmobi_conf);if(!inmobi_conf.manual){b.writeIframe(inmobi_conf)}})();(function(){if(!window._inmobi.globalEval){window._inmobi.globalEval=function(a){return eval(a)}}})();
